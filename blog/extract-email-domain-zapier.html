<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport"content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,minimal-ui">
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Extract Email Domain with Zapier</title>
	<meta name="description" content="">
	<link rel="canonical" href="http://www.caretjuice.com/blog/extract-email-domain-zapier.html" />
    
    <link href="../stylesheets/app-8c91da35.css" rel="stylesheet" />
    <script src="../javascripts/modernizr-0145479a.js"></script>
	<link href="/assets/images/favicon-d706ba9e.png" rel="shortcut icon" type="image/png">
	<link href="/assets/images/favicon-152-da840e5c.png" rel="apple-touch-icon-precomposed">
	<meta name="msapplication-TileColor" content="#FFFFFF">
	<meta name="msapplication-TileImage" content="/assets/images/favicon-144-ac9bfb6e.png">
	
	<meta property="og:url" content="http://www.caretjuice.com/blog/extract-email-domain-zapier.html?utm_source=facebook&utm_medium=social&utm_campaign=open-graph" />
	<meta property="og:type" content="article" />
	<meta property="og:title" content="Extract Email Domain with Zapier" />
	<meta property="og:description" content="Caret Juice Marketing" />
	<meta property="og:image" content="http://www.caretjuice.com/assets/images/caretjuice-logo-2.png" />
	<meta property="og:site_name" content="Caret Juice Marketing" />
  </head>
  
  <body class="blog blog_extract-email-domain-zapier">
	<!-- Google Tag Manager -->
	<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PRFCGK"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-PRFCGK');</script>
	<!-- End Google Tag Manager -->
	<div class="off-canvas-wrap" data-offcanvas>
		<div class="inner-wrap">
    		<div class="contain-to-grid section">
	<nav class="top-bar show-for-large-up" data-topbar role="navigation">
		<ul class="title-area">
	    <li class="name">
<a href="/">			  <img alt="Caret Juice Marketing Logo" src="../assets/images/caretjuice-logo-2-b7bf8654.png" />
</a>	    </li>
	     <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
	    
	  </ul>
	  <section class="top-bar-section">
	     <ul class="right">
			<li><a href="/">Home</a></li>
			<li><a href="/blog/">Blog</a></li>
	      	<li><a href="/contact/">Contact</a></li>
	    </ul>
	  </section>
	</nav>
</div>
<nav class="tab-bar hide-for-large-up">
	<section class="tab-bar-section">
		<h1 class="title"><a href="/">Caret Juice Marketing</a></h1>
	</section>

      <section class="right tab-bar-section">
        <a class="right-off-canvas-toggle" href="#mobile-menu">MENU</a>
      </section>
</nav>
<nav id="mobile-menu" class="right-off-canvas-menu">
	<ul class="off-canvas-list">
		<li><a href="/">Home</a></li>
		<li><a href="/blog/">Blog</a></li>
		<li><a href="/contact/">Contact</a></li>
	</ul>
</nav>
    <article itemid="http://www.caretjuice.com/blog/extract-email-domain-zapier.html" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="article-info">
		<div class="text-center row">
			<div class=" small-12 columns">
				<h1 style="margin-bottom:5px; line-height:2.2rem;" itemprop="headline">Extract Email Domain with Zapier</h1>
				<p>by <a rel="author" href="/blog/author/damon">Damon Gudaitis</a> | under <a href="/blog/category/recipes">Recipes</a></p>
				<h2 class="subheader" style="font-weight:normal; margin-bottom:5px; line-height:1.6rem; font-size:1.4rem; font-style:italic;" itemprop="description">Notify sales when an old account reactivates and a new account heats up.</h2>
		
				<a href="http://twitter.com/intent/tweet?text=Notify sales when an old account reactivates and a new account heats up.&url=http://www.caretjuice.com/blog/extract-email-domain-zapier.html&via=damongudaitis" target="blank">Tweet This</a>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="small-12 large-8 large-offset-2 columns" itemprop="articleBody">
		    <p>When you capture information online there is always a balance between asking for more information and making it as easy as possible for your visitors to complete their task.</p>

<p>You want more information to help you decide what to do with the person but you also want to maximize the number of people who give you their contact information.</p>

<p>In a B2B context, email addresses are king. Every form has an email field. But everything else is up for debate particularly when you need more information to qualify whether it is worth having a sales rep contact the lead.</p>

<p>There is a lot that you can do with just the email address particularly if you get the email domain from the address.</p>

<h2>Internal Notifications</h2>

<p>Extracting the email domain from your contacts lets you trigger a number of useful internal notifications when working complex sales with long sales cycles.</p>

<p>If you’re selling high-priced (and hopefully high-value) items to other businesses, then often there will be several people included in the decision to buy. These sales usually take a long time. I’ve seen sales reps working an account for years before finally closing a sale.</p>

<p>Notifying sales reps when a new contact from one of their accounts starts interacting with your marketing materials can be of great value. </p>

<p>It can mean that a good prospect that wasn’t ready several years ago is now in the market.</p>

<p>Or, if they are already in a sales cycle, it can tell the sales rep who are some of the other decision makers who will be involved in the purchase. They can then do more research seeing what sorts of content they read on the site and learn more about the individual online.</p>

<p>We can trigger these notifications by matching email domains.</p>

<h2>Lead Scoring</h2>

<p>Another way that you can use email domain is in scoring leads that your sales team hasn’t spoken to before.</p>

<p>Again, presuming you’re working a complex sale with long sales cycles, seeing multiple contacts from the same email domain is a good signal that the company associated with that domain is in the market.</p>

<p>Matching multiple email domains over the space of a few months should give leads a big boost to their lead score and trigger a follow up from the sales team.</p>

<h2>Collecting Pre-Sales Data</h2>

<p>The email domain is also useful for collecting pre-sales data from other databases like Salesforce’s data.com, Dun and Bradstreet or LinkedIn.</p>

<p>Using the company name is unreliable when you’re tying to match different data sources.</p>

<p>You can have separate legal names, trade names and DBAs (doing business as).</p>

<p>Sometimes people include the designations like Ltd. and  LLC at the end of the name, but other people often leave them out.</p>

<p>You even have problems with adding or leaving off the period in Ltd. or using abbreviations versus spelling out <em>Limited</em>.</p>

<p>You can have the same company name used by different companies in different parts of the world.</p>

<p>Sometimes people even make typos.</p>

<p>And finally, you can have conglomerates of multiple companies each with their own name.</p>

<p>If you’ve got a verified email address, then you have a unique identifier for the individual and for the company that owns that domain.</p>

<p>You can use the domain to more reliably get data about the company than you can a company name typed in to an online form.</p>

<p>One problem with using the domain is that you can have multiple domains for a company. Or different domains for different departments or regions.</p>

<p>The LinkedIn API helps with this challenge. It associates multiple domains with each company. You can use the API to look up company data by domain and find other domains associated with the company and then match against all of the domains.</p>

<p>Salesforce only lets you look up by website and email domains are often different from website domains and you won’t capture the full range of email domains associated with a particular company.</p>

<p>Once you connect with a data source, you can pull all sorts of information like the name, number of employees, revenue (if they are public) and all sorts of location data.</p>

<p>Regardless of data source, using the email domain to look up additional information from third party databases is an advanced use and should only be done by an experienced developer.</p>

<h2>Marketing Automation</h2>

<p>All of these uses for email domain assume that you have a complex sale and that you are using marketing automation and CRM. Some of the set up is best done in your marketing automation system.</p>

<p>Filtering out Gmail, Yahoo and Live/Hotmail addresses is best done in your marketing automation system. Keeping a running list of email domains that you want to filter in the marketing automation system is easier than modifying the custom script that we’re going to use.</p>

<p>Similarly, triggering notifications and lead scoring is best done in the marketing automation system.</p>

<p>Because the specifics of each system vary a great deal, we won’t cover how exactly to set up the filtering, notifying, matching and scoring. These are the types of things that marketing automation systems do well so they shouldn’t be too difficult to set up.</p>

<h2>Zapier</h2>

<p>Extracting the email domain from an email address is usually a customization in marketing automation systems that is not so easy to set up.</p>

<p>Microsoft Dynamics CRM would require some scripting in Visual Basic that would only be useful for Dynamics users. Hubspot would require that you do an API integration and host your own code.</p>

<p>We’re going cover how to use Zapier to extract the email domain. This way, Zapier hosts your code and you can use these instructions with any Zapier-compatible system.</p>

<p>Zapier recently launched multi-step Zaps that make this workflow possible.</p>

<p>Create a new multi-step Zap that triggers when a New Contact is added to your marketing automation system (or CRM).</p>

<p>The first thing you need to do is create a field to keep the email domain in your system.</p>

<p>Specifics of how to do this depend on your system, but it shouldn’t be difficult. Name the field <em>Email Domain</em>.</p>

<p>In Zapier, create a new Zap and select <strong>New Contact</strong> as the trigger from your marketing automation/CRM system.</p>

<p><img alt="New Contact Zapier Trigger" src="../assets/images/new-contact-trigger-7d0fb622.png" /></p>

<p>Test the step and check the contact information.</p>

<p>Next add a <strong>Filter</strong> that checks whether the new contact has an email address.</p>

<p><img alt="Contact Exists Zapier Filter" src="../assets/images/contact-exists-filter-08bfffb0.png" /></p>

<p>Now comes a little bit of code, but I promise that it will be quite painless.</p>

<p>Add a <strong>Code by Zapier</strong> action and select <strong>Run Python</strong>.</p>

<p>In the <strong>Input</strong> section of the <strong>Edit Template</strong> step, select the marketing automaion/CRM email field and name it <em>email</em>.</p>

<p>Be sure to keep the name lower case or else it will break the code in the next step.</p>

<p><img alt="Extract Email Domain Settings and Code" src="../assets/images/extract-email-domain-fa997eb4.png" /></p>

<p>Enter the following code into the <strong>Code</strong> section.</p>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">re</span>
<span class="n">email</span> <span class="o">=</span> <span class="nb">input</span><span class="p">[</span><span class="s">'email'</span><span class="p">]</span>
<span class="n">emailatDomain</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">".+@([</span><span class="err">\</span><span class="s">w.]+)"</span><span class="p">,</span> <span class="n">email</span><span class="p">)</span>
<span class="k">return</span> <span class="p">{</span>
    <span class="s">'emailDomain'</span><span class="p">:</span> <span class="n">emailatDomain</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">emailatDomain</span> <span class="k">else</span> <span class="s">'Error'</span>
<span class="p">}</span>
</code></pre>

<p>For those of you with little knowledge of Python, here’s what’s going on.</p>

<p>Line 1: Import the regular expression module that will let us match patterns.</p>

<p>Line 2: Grab the input that we named email (and assigned to the email field from the marketing automation system) and make it a variable called <em>email</em>.</p>

<p>Line 3: Search for any combination of characters or symbols until you find an @ sign, then look for one or more upper or lower case letters, numbers and periods and create a group from whatever matches this last part of the pattern. Call the whole collection emailatDomain.</p>

<p>Line 4: Return the following for Zapier to use.</p>

<p>Line 5: Create emailDomain from the group of letters, numbers and periods after the @ sign if emailatDomain is set. Otherwise return the word <em>Error</em>.</p>

<p>Test the code against a recent contact.</p>

<p>Finally, we need to send the email domain back to your marketing automation or CRM system.</p>

<p>Create a new Update Contact type of Action for your marketing automation or CRM system.</p>

<p><img alt="Update Contact Zapier Action" src="../assets/images/update-contact-490f7d3a.png" /></p>

<p>Match the email address of the contact against the email field from your system.</p>

<p><img alt="Match Contact Email" src="../assets/images/match-contact-email-113dece6.png" /></p>

<p>And then finally, scroll down to the <strong>Email Domain</strong> field that you created in your system and match the <strong>EmailDomain</strong> variable that you returned in your <strong>Code by Zapier</strong> script.</p>

<p><img alt="Send Zapier Code to System" src="../assets/images/send-zapier-code-to-system-09fe5c56.png" /></p>

<p>Now you should start getting email domains separated out from the email addresses for any new contacts that enter the system from now on.</p>

<p>You can start using the field in your chosen system to trigger notifications, score leads, or fetch additional information about the company.</p>
	
		</div>
	</div>	
</article>
<div class="signup-bar">
	<div class="row">
		<div class="show-for-medium-up medium-6 columns">
			<div class="rss-sub right">
				<a href="/feed.xml">
					<i class="fa fa-rss"></i>
				</a>
			</div>
			<div class="sub-text">
				<i class="fa fa-envelope-o"></i>
				&nbsp;Subscribe to updates from Caret Juice:
			</div>
		</div>
		<!-- Begin MailChimp Signup Form -->
		<div id="mc_embed_signup">
		<form action="//caretjuice.us11.list-manage.com/subscribe/post?u=e2b791a2c123fed10e4dba8d6&amp;id=dce8ff9805" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
		    <div id="mc_embed_signup_scroll">

		<div class="mc-field-group small-6 medium-3 columns">
			<label for="mce-EMAIL" style="display:none;">Email Address </label>
			<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="Email">
		</div>
			<div id="mce-responses" class="clear">
				<div class="response" id="mce-error-response" style="display:none"></div>
				<div class="response" id="mce-success-response" style="display:none"></div>
			</div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
		    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_e2b791a2c123fed10e4dba8d6_dce8ff9805" tabindex="-1" value=""></div>
		    <div class="small-4 medium-2 columns text-center"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
		    </div>
		</form>
		</div>
		<div class="small-2 medium-1 columns">
			<div class="close"><i class="fa fa-times"></i></div> 
		</div>
	</div>
</div>
<div class="row">
	<div class="small-12 large-8 large-offset-2 columns">
		<div class="social-share ">
			<ul class="inline-list inline-list-center">
			<li><h4>Share:</h4></li>
			<li style="background-color: #0077B5"><a class="icon" href="https://ca.linkedin.com/in/damongudaitis" rel="nofollow" target="_blank"><i class="fa fa-linkedin"></i> LinkedIn</a></li>
			<li style="background-color: #55acee"><a class="icon" href="https://twitter.com/intent/tweet?text=Extract Email Domain with Zapier&url=http://www.caretjuice.com/blog/extract-email-domain-zapier.html&via=damongudaitis" rel="nofollow" target="_blank"><i class="fa fa-twitter"></i> Twitter</a></li>
			<li style="background-color: #3b5998"><a class="icon" href="http://www.facebook.com/sharer/sharer.php?u=http://www.caretjuice.com/blog/extract-email-domain-zapier.html" rel="nofollow" target="_blank"><i class="fa fa-facebook"></i> Facebook</a></li>			
			</ul>
		</div>
		<div class="row panel secondary-cta">
	<div class="text-center">
		<h3>Practical Business Automation</h3>
		<h4><em>Guide to business&nbsp;automation in the golden age of software&nbsp;as&nbsp;a&nbsp;service.</em></h4>
	</div>
	<div class="small-12 medium-7 columns">
		<p>Learn about the Constellation Approach to Business Technology&mdash;the conceptual framework that underpins Caret Juice services. Follow our recipes and set up your own automation.</p>
	</div>
	<div class="text-center small-12 medium-5 columns">
		<a class="button secondary" href="/practical-automation">Read the Guide<br/><small>FREE - NO EMAIL REQUIRED</small></a>
	</div>
</div>
		<div id="disqus_thread"></div>
<script type="text/javascript">
//<![CDATA[
                  var disqus_shortname = 'caretjuice';
          
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
//]]>
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

	</div>
</div>


			<a class="exit-off-canvas"></a>
		</div>
	</div>
    <footer class="footer">
		<div class="row">
			<nav class="small-12 columns">
				<ul class="left inline-list">
					<li class="copyright"><small>&copy; Caret Juice Marketing</small></li>
				</ul>
				<ul class="right inline-list">
					<li><a href="/privacy/">Privacy</a></li>
					<li><a href="/contact/">Contact</a></li>
				</ul>
			</nav>
		</div>
	</footer>
	<script src="../javascripts/all-ae6b5d2e.js"></script>
	<script src="/javascripts/equalizer-161a78ef.js"></script>
	<script>
	$(document).foundation();
	$('.lazyYT').lazyYT();

	  function getParameterByName(name) {
	    name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
	    var regexS = "[\\?&]" + name + "=([^&#]*)";
	    var regex = new RegExp(regexS);
	    var results = regex.exec(window.location.search);
	    if(results == null) {
	      return "";
	    } else {
	      return decodeURIComponent(results[1].replace(/\+/g, " "));
	    }
	  }

	  $(document).ready(function () {
	    function addFormElem(paramName, fieldName) {
	      var paramValue = getParameterByName(paramName);
	      var $utmEl = $("<input type='hidden' name='" + fieldName + "' value='" + paramValue + "'>");
	      if (paramValue != "") {
	        $("form").first().prepend($utmEl);
	      }
	    }

	    // Note: Only change the values after ":" if they are different for you
	    // They are the same one as you added in your email marketing provider
	    var utmParams = {
	      "utm_campaign" : "Campaign",
	      "utm_source"   : "Source",
	      "utm_medium"   : "Medium",
	      "utm_content"  : "Content",
	      "utm_term"     : "Term"
	    };

	    for (var param in utmParams) {
	      addFormElem(param, utmParams[param]);
	    }
	  });
	</script>
	<script type="text/javascript" src="https://caretjuice.agilecrm.com/stats/min/agile-min.js"> </script> <script type="text/javascript" > _agile.set_account('dsre5qvjds4rmlt9nh2eteo5be', 'caretjuice'); _agile.track_page_view(); _agile_execute_web_rules(); </script>
  </body>
</html>
